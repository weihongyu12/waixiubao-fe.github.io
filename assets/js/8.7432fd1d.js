(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{62:function(t,s,a){t.exports=a.p+"assets/img/ci.6e79138d.svg"},75:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"构建流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 构建流程")]),t._v(" "),n("h2",{attrs:{id:"手脚架"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手脚架","aria-hidden":"true"}},[t._v("#")]),t._v(" 手脚架")]),t._v(" "),n("p",[t._v("手脚架使用 "),n("a",{attrs:{href:"https://cli.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("@vue/cli 3.x"),n("OutboundLink")],1),t._v("，启用自定义配置，配置流程如下：")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择项目所需要的特性：")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Babel（启用Babel转码）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# PWA （启用PWA）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Router （安装vue-router）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Vuex （安装vuex）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CSS Pre-processors （使用CSS预处理器）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Linter / Formatter （使用静态检查/格式化）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Unit Testing （启用单元测试）")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# E2E Testing（启用E2E测试）")]),t._v("\nCheck the features needed "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" your project: \n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Babel\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" TypeScript\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Progressive Web App "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PWA"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Support\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Router\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Vuex\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" CSS Pre-processors\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Linter / Formatter\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Unit Testing\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" E2E Testing\n")])])]),n("div",{staticClass:"tip custom-block"},[n("p",[t._v("除TypeScript必选")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 路由使用 history mode? (需要配置正式服务器) Y")]),t._v("\nUse "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" mode "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" router? "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Requires proper server setup "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" index fallback "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" production"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Y/n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Y\n")])])]),n("div",{staticClass:"tip custom-block"},[n("p",[t._v("关于history mode的配置可以查看"),n("a",{attrs:{href:"https://router.vuejs.org/guide/essentials/history-mode.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),n("OutboundLink")],1)])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择CSS预处理器：SCSS/SASS")]),t._v("\nPick a CSS pre-processor:\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" SCSS/SASS\n  LESS\n  Stylus\n")])])]),n("div",{staticClass:"tip custom-block"},[n("p",[t._v("其他预处理器如果需要可以独立安装")])]),t._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",[t._v("PostCSS, Autoprefixer 和 CSS Modules 默认支持")])]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择linter / formatter配置：ESLint + Airbnb config")]),t._v("\nPick a linter / formatter config: \n  TSLint\n  ESLint with error prevention only\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ESLint + Airbnb config\n  ESLint + Standard config\n  ESLint + Prettier\n")])])]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择其他lint功能：Lint on save, Lint and fix on commit")]),t._v("\nPick additional lint features:\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Lint on save\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Lint and fix on commit\n")])])]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择单元测试框架：Mocha + Chai")]),t._v("\nPick a unit testing solution: \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Mocha + Chai\n  Jest\n")])])]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选择E2E测试框架：Nightwatch")]),t._v("\nPick a E2E testing solution:\n  Cypress "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Chrome only"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Nightwatch "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Selenium-based"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"构建命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建命令","aria-hidden":"true"}},[t._v("#")]),t._v(" 构建命令")]),t._v(" "),n("p",[t._v("我们需要在"),n("code",[t._v("package.json")]),t._v("文件配置以下命令：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-cli-service build --modern"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("并通过此命令构建应用程序：")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build\n")])])]),n("div",{staticClass:"tip custom-block"},[n("p",[t._v("包管理工具统一使用 "),n("a",{attrs:{href:"https://yarnpkg.com/zh-Hans/",target:"_blank",rel:"noopener noreferrer"}},[t._v("yarn"),n("OutboundLink")],1),t._v("，因为其速度更快。")])]),t._v(" "),n("p",[t._v("通过构建，我们会得到：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("index.html")]),t._v(" 会带有注入的资源和 resource hint")]),t._v(" "),n("li",[t._v("第三方库会被分到一个独立包以便更好的缓存")]),t._v(" "),n("li",[t._v("小于 10kb 的静态资源会被内联在 JavaScript 中")]),t._v(" "),n("li",[n("code",[t._v("public")]),t._v(" 中的静态资源会被复制到输出目录中")])]),t._v(" "),n("p",[t._v("我们使用了"),n("code",[t._v("--modern")]),t._v("参数 使用现代模式构建应用，为现代浏览器交付原生支持的 ES2015 代码，并生成一个兼容老浏览器的包用来自动回退。")]),t._v(" "),n("ul",[n("li",[t._v("现代版的包会通过 "),n("code",[t._v('<script type="module">')]),t._v(" 在被支持的浏览器中加载；它们还会使用 "),n("code",[t._v('<link rel="modulepreload">')]),t._v(" 进行预加载。")]),t._v(" "),n("li",[t._v("旧版的包会通过 "),n("code",[t._v("<script nomodule>")]),t._v(" 加载，并会被支持 ES modules 的浏览器忽略。")]),t._v(" "),n("li",[t._v("一个针对 Safari 10 中 "),n("code",[t._v("<script nomodule>")]),t._v(" 的修复会被自动注入。")]),t._v(" "),n("li",[t._v("经过分析，现代版的包已经小了约 16%。在生产环境下，现代版的包通常都会表现出显著的解析速度和运算速度，从而改善应用的加载性能。")])]),t._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",[n("code",[t._v('<script type="module">')]),t._v("需要配合始终开启的 CORS 进行加载。这意味着你的服务器必须返回诸如 "),n("code",[t._v("Access-Control-Allow-Origin: *")]),t._v("的有效的 CORS 头。如果你想要通过认证来获取脚本，可使用 "),n("code",[t._v("corsUseCredentials")]),t._v(" 选项。")]),t._v(" "),n("p",[t._v("同时，现代浏览器使用一段内联脚本来避免 Safari 10 重复加载脚本包，所以如果你在使用一套严格的 "),n("code",[t._v("CSP")]),t._v("，你需要这样显性地允许内联脚本：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Content-Security-Policy: script-src 'self' 'sha256-4RS22DYeB7U14dra4KcQYxmwt5HkOInieXK1NUMBmQI='\n")])])])]),t._v(" "),n("h2",{attrs:{id:"构建工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建工具","aria-hidden":"true"}},[t._v("#")]),t._v(" 构建工具")]),t._v(" "),n("h3",{attrs:{id:"webpack"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webpack","aria-hidden":"true"}},[t._v("#")]),t._v(" Webpack")]),t._v(" "),n("p",[t._v("Webpack 用于应用打包，主要工作文件转码、合并、切割、压缩等等，如果需要单独配置请查看 "),n("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/webpack.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("@vue/cli 文档"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"babel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#babel","aria-hidden":"true"}},[t._v("#")]),t._v(" Babel")]),t._v(" "),n("p",[t._v("Babel 是用于转化 ES6 至 ES5 的工具，生成的项目已经自带了 Babel 7")]),t._v(" "),n("p",[t._v("可以使用 "),n("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-import",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-import"),n("OutboundLink")],1),t._v("，按需加载需要的package，减少最后打包文件的大小")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("modules"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plugins"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"import"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"libraryName"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mand-mobile"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"libraryDirectory"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lib"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"css"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#css","aria-hidden":"true"}},[t._v("#")]),t._v(" CSS")]),t._v(" "),n("h4",{attrs:{id:"css-预处理器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#css-预处理器","aria-hidden":"true"}},[t._v("#")]),t._v(" CSS 预处理器")]),t._v(" "),n("p",[t._v("CSS 预处理器默认选择 Sass，但是在项目进行中，如果需要其他的预处理器，可以独立进行安装")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Sass")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -D sass-loader sass\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Less")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -D less-loader "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("less")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Stylus")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -D stylus-loader stylus\n")])])]),n("h4",{attrs:{id:"postcss"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#postcss","aria-hidden":"true"}},[t._v("#")]),t._v(" PostCSS")]),t._v(" "),n("p",[t._v("PostCSS 是一款 CSS 后处理器，主要用于为 CSS 加上浏览器兼容前缀")]),t._v(" "),n("p",[t._v("在实际项目中，可根据具体情况使用 "),n("a",{attrs:{href:"https://www.npmjs.com/package/postcss-pxtorem",target:"_blank",rel:"noopener noreferrer"}},[t._v("postcss-pxtorem"),n("OutboundLink")],1),t._v(" 把 "),n("code",[t._v("px")]),t._v(" 单位转成 "),n("code",[t._v("rem")]),t._v("，从而实现不同设备下等比缩放的效果")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pxtorem "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'postcss-pxtorem'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pxtorem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      rootValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      propWhiteList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),n("p",[t._v("构建完成的文件会生成一个 "),n("code",[t._v("dist")]),t._v(" 文件夹，将 "),n("code",[t._v("dist")]),t._v(" 目录里构建的内容部署到任何静态文件服务器中，但要确保正确的 "),n("code",[t._v("baseUrl")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  baseUrl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://cdn.exmaple.com/'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"使用-history-模式的路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-history-模式的路由","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用 history 模式的路由")]),t._v(" "),n("p",[t._v("如果不想要很丑的 hash，我们可以用路由的 "),n("a",{attrs:{href:"https://router.vuejs.org/zh/guide/essentials/history-mode.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("history 模式"),n("OutboundLink")],1),t._v("，这种模式充分利用 history.pushState API 来完成 URL 跳转而无须重新加载页面")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# nginx.conf\nlocation / {\n  try_files $uri $uri/ /index.html;\n}\n")])])]),n("h3",{attrs:{id:"cors"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cors","aria-hidden":"true"}},[t._v("#")]),t._v(" CORS")]),t._v(" "),n("p",[t._v("前端静态内容是部署在与后端 API 不同的域名上，需要适当地配置 CORS")]),t._v(" "),n("p",[t._v("以下是一个后端 API 的响应头示例")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Access-Control-Allow-Origin: https://m.waixiubao.com\nAccess-Control-Allow-Methods: POST, GET, PUT, DELETE, OPTIONS\nAccess-Control-Allow-Headers: Authenticate\nAccess-Control-Max-Age: 86400\nAccess-Control-Allow-Credentials: true\n")])])]),n("h3",{attrs:{id:"pwa"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pwa","aria-hidden":"true"}},[t._v("#")]),t._v(" PWA")]),t._v(" "),n("p",[t._v("使用了 PWA 插件，应用必须架设在 HTTPS 上，这样 Service Worker 才能被正确注册")]),t._v(" "),n("h2",{attrs:{id:"持续集成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#持续集成","aria-hidden":"true"}},[t._v("#")]),t._v(" 持续集成")]),t._v(" "),n("p",[t._v("持续集成的主要工作是：")]),t._v(" "),n("ul",[n("li",[t._v("使用 Git 推送到 Gitlab 仓库（会运行静态检查）")]),t._v(" "),n("li",[t._v("构建应用")]),t._v(" "),n("li",[t._v("运行单元测试")]),t._v(" "),n("li",[t._v("部署应用和相关文档到远程服务器")])]),t._v(" "),n("p",[t._v("可以使用 Gitlab CI 进行相关工作")]),t._v(" "),n("div",{staticClass:"language-yaml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# .gitlab-ci.yml")]),t._v("\nbuild site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" build\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn install "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("frozen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lockfile\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn build\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("artifacts")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expire_in")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1 week\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("paths")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" dist\n\nunit test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" test\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn install "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("frozen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lockfile\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("unit\n\ne2e test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" selenium/standalone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("chrome\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" test\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn install "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("frozen"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lockfile\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" yarn test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("e2e\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" alpine\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" deploy\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" apk add "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cache rsync openssh\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mkdir "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("p ~/.ssh\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' echo "$SSH_PRIVATE_KEY" '),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" ~/.ssh/id_dsa\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chmod 600 ~/.ssh/id_dsa\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" echo "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('e "Host *\\n\\tStrictHostKeyChecking no\\n\\n" '),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" ~/.ssh/config\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" rsync "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rav "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("delete dist/ user@server.com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/your/project/path/\n")])])]),n("h3",{attrs:{id:"持续集成流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#持续集成流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 持续集成流程")]),t._v(" "),n("p",[n("img",{attrs:{src:a(62),alt:"CI"}})]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("编写代码：")]),t._v(" 包括功能代码、相关测试和文档")]),t._v(" "),n("li",[n("strong",[t._v("ESLint 检查：")]),t._v(" 代码是否通过 ESLint 检查")]),t._v(" "),n("li",[n("strong",[t._v("Commitlint 检查：")]),t._v(" Commit Message 是否符合规范")]),t._v(" "),n("li",[n("strong",[t._v("提交 MR：")])]),t._v(" "),n("li",[n("strong",[t._v("触发 CI 自动化测试：")]),t._v(" "),n("ul",[n("li",[t._v("代码风格检查是否符合规范")]),t._v(" "),n("li",[t._v("应用是否构建完成")]),t._v(" "),n("li",[t._v("是否通过单元测试")]),t._v(" "),n("li",[t._v("单元测试覆盖率是否达标")])])]),t._v(" "),n("li",[n("strong",[t._v("Code Review：")]),t._v(" 至少经过一名高级工程师 Review")]),t._v(" "),n("li",[n("strong",[t._v("合并到主分支：")]),t._v(" 将进行第二轮 CI 自动化测试")])]),t._v(" "),n("h3",{attrs:{id:"commitlint"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commitlint","aria-hidden":"true"}},[t._v("#")]),t._v(" Commitlint")]),t._v(" "),n("p",[t._v("为了方便追踪历史记录，并生成响应的 Changelog，建议使用 Commitlint 对commit message 进行校验")]),t._v(" "),n("h4",{attrs:{id:"安装及配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装及配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装及配置")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" yorkie @commitlint/cli @commitlint/config-conventional -D\n")])])]),n("div",{staticClass:"language-json extra-class"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitHooks"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commit-msg"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commitlint -E HUSKY_GIT_PARAMS"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// commitlint.config.js")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@commitlint/config-conventional'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  rules"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'type-enum'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'always'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ci'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chore'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'docs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feat'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fix'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'perf'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'refactor'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'revert'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'improvement'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",[t._v("参考 "),n("a",{attrs:{href:"https://www.conventionalcommits.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Conventional Commits"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("Commit Message 信息格式统一如下：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<type>[optional scope]: <description>\n\n[optional body]\n\n[optional footer]\n")])])]),n("p",[t._v("例如")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("fix(core): correct minor typos in code\n\nsee the issue for details on the typos fixed\n\nclose #12\n")])])]),n("h5",{attrs:{id:"type"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#type","aria-hidden":"true"}},[t._v("#")]),t._v(" type")]),t._v(" "),n("p",[t._v("type用于说明 commit 的类别，只允许使用下面标识：")]),t._v(" "),n("ul",[n("li",[t._v("build: 构建过程或辅助工具的变动")]),t._v(" "),n("li",[t._v("ci: 对CI配置文件和脚本的更改")]),t._v(" "),n("li",[t._v("chore: 其他的辅助更改")]),t._v(" "),n("li",[t._v("docs: 文档更改")]),t._v(" "),n("li",[t._v("feat: 新功能")]),t._v(" "),n("li",[t._v("fix: bug 修复")]),t._v(" "),n("li",[t._v("perf: 改进性能的代码更改")]),t._v(" "),n("li",[t._v("refactor: 重构（即不是新增功能，也不是修改bug的代码变动）")]),t._v(" "),n("li",[t._v("revert: commit 回滚")]),t._v(" "),n("li",[t._v("style: 格式（不影响代码运行的变动）")]),t._v(" "),n("li",[t._v("test: 测试代码的变动")]),t._v(" "),n("li",[t._v("improvement: 功能改进或优化")])]),t._v(" "),n("h6",{attrs:{id:"revert"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#revert","aria-hidden":"true"}},[t._v("#")]),t._v(" revert")]),t._v(" "),n("p",[t._v("如果当前 Commit 用于撤销以前的 Commit，则必须以 "),n("code",[t._v("revert:")]),t._v(" 开头，后面跟着被撤销 Commit Message")]),t._v(" "),n("p",[t._v("Body 部分的格式是固定的，必须写成"),n("code",[t._v("This reverts commit <hash>.")]),t._v("，其中的hash是被撤销 Commit 的 SHA 标识符")]),t._v(" "),n("p",[t._v("比如")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("revert: fix(core): correct minor typos in code\n\nThis reverts commit 667ecc1654a317a13331b17617d973392f415f02.\n")])])]),n("h5",{attrs:{id:"scope"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#scope","aria-hidden":"true"}},[t._v("#")]),t._v(" scope")]),t._v(" "),n("p",[t._v("可选，scope 用于说明 Commit 影响的范围")]),t._v(" "),n("h5",{attrs:{id:"subject"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#subject","aria-hidden":"true"}},[t._v("#")]),t._v(" subject")]),t._v(" "),n("p",[t._v("subject 是 Commit 目的的简短描述，不超过50个字符")]),t._v(" "),n("h5",{attrs:{id:"body"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#body","aria-hidden":"true"}},[t._v("#")]),t._v(" body")]),t._v(" "),n("p",[t._v("可选，body 部分是对本次 Commit 的详细描述，可以分成多行")]),t._v(" "),n("h5",{attrs:{id:"footer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#footer","aria-hidden":"true"}},[t._v("#")]),t._v(" footer")]),t._v(" "),n("p",[t._v("可选，只用于两种情况")]),t._v(" "),n("h6",{attrs:{id:"不兼容变动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#不兼容变动","aria-hidden":"true"}},[t._v("#")]),t._v(" 不兼容变动")]),t._v(" "),n("p",[t._v("如果当前代码与上一个版本不兼容，则 footer 部分以 BREAKING CHANGE 开头，后面是对变动的描述、以及变动理由和迁移方法")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("BREAKING CHANGE: isolate scope bindings definition has changed.\n\n  To migrate the code follow the example below:\n\n  Before:\n\n  scope: {\n    myAttr: 'attribute',\n  }\n\n  After:\n\n  scope: {\n    myAttr: '@',\n  }\n\n  The removed `inject` wasn't generaly useful for directives so there should be no code using it.\n")])])]),n("h6",{attrs:{id:"关闭-issue"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关闭-issue","aria-hidden":"true"}},[t._v("#")]),t._v(" 关闭 Issue")]),t._v(" "),n("p",[t._v("如果当前 Commit 针对某个 Issue，那么可以在 footer 部分关闭这个 Issue")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Close #234\n")])])]),n("p",[t._v("也可以一次关闭多个 issue 。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Close #123, #245, #992\n")])])]),n("div",{staticClass:"tip custom-block"},[n("p",[t._v("理论上，每次提交都应该有一个明确的 Issue")])])])},[],!1,null,null,null);s.default=e.exports}}]);